<script>

    let opcion = "";
    let productos = []
    let idCreados = [];

    class Producto{

        constructor(id, nombre, precio){

            this.id=id;
            this.nombre=nombre;
            this.precio=precio;
        }
    }

    function agregarProducto(){
        let idProducto = parseInt(prompt("id del producto:"));
        let nombreProducto = prompt("nombre del producto:");
        let precioProducto = prompt("precio del producto:");

        return new Producto(idProducto, nombreProducto, precioProducto);
    }
    
    function listarProductos(){
        return console.log(productos);
    }

    function eliminarProductoId(idEliminar){
        idEliminar = parseInt(prompt("Ingrese el id del producto que desea eliminar:"));
            
            for(let p of productos){
                if(p.id === parseInt(idEliminar)){
                    let elemento = productos.indexOf(p);

                    productos.splice(elemento,1);

                }
            }
    }

    function cambiarProductoId(){
        idCambiar = parseInt(prompt("Ingrese el id del producto que desea cambiar:"));

        for(let p of productos){
            if(p.id === parseInt(idCambiar)){
                let elemento = productos.indexOf(p);

                productos.map(function (productos2){
                    if(productos.id === parseInt(idCambiar)){
                        id = prompt("Introduzca el nuevo id:");
                        nombre = prompt("Introdcuzca el nuevo nombre:");
                        precio = prompt("Introduzca el nuevo precio:");
                    }
                    return productos2;
                })

            }
        }

    }


    while(opcion!=="fin"){
        
        let opcion = prompt("Elija una opcion: \n a) Crea un producto \n b) Listar todos los productos de la tienda \n c) Borrar un producto segun su id \n d) Modificar un producto segun su id \n e) FIN");

        while(opcion!=="a" && opcion!=="b" && opcion!=="c" && opcion!=="d" && opcion!=="e"){
            
            let opcion = prompt("Elija una opcion: \n a) Crea un producto \n b) Listar todos los productos de la tienda \n c) Borrar un producto segun su id \n d) Modificar un producto segun su id \n e) FIN");
        }

        if(opcion==="a"){
            let prod = agregarProducto();
            productos.push(prod)
        }
        else if(opcion==="b"){
            listarProductos()
            // console.log(productos)
        }
        else if(opcion==="c"){
            eliminarProductoId()
            // mio MAL

            // for(p in productos){
            //     idCreados.push(productos[p].id);
            //     let estaId = idCreados.includes(idEliminar);
            //     if(estaId === true){
            //         productos.splice(p,1)
            //     }

            // }
            
        }
        else if(opcion==="d"){
            cambiarProductoId()
        }
        else if(opcion==="e"){
            alert("Hasta la proxima");
            break;
        }
    }

</script>